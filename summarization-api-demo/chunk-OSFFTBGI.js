import{a as A}from"./chunk-IG6KZ4J4.js";import{C as f,Da as j,F as h,G as y,L as v,M as s,N as c,O as C,T as w,V as _,X as z,Y as M,Z as g,_ as b,aa as D,ba as E,ca as N,g as a,ha as k,i as d,j as p,ka as T,la as q,ma as P,n as m,oa as V,v as i,wa as R,xa as L,y as S,ya as Q,za as W}from"./chunk-TLBTZREK.js";var H=["answer"];function I(r,e){r&1&&C(0,"div",null,0)}var F=class r{summarizationService=a(R);parserService=a(A);renderer=a(S);content=P.required();options=T.required();answer=q.required("answer");element=k(()=>this.answer().nativeElement);error=m("");isSummarizing=m(!1);chunk=m("");constructor(){V({write:()=>{let e=this.chunk();e&&this.parserService.writeToElement(e)}})}async requestSummary(){try{this.isSummarizing.set(!0),this.chunk.set(""),this.clearSummary();let e=await this.summarizationService.createSummarizer(this.options());if(e){let n=await this.summarizationService.summarize({summarizer:e,content:this.content().trim()});this.chunk.set(n)}}catch(e){console.error(e),this.error.set("Error in streaming the summary.")}finally{this.isSummarizing.set(!1)}}clearSummary(){let e=this.element();e.lastChild&&this.renderer.setProperty(e,"innerHTML",""),this.parserService.resetParser(e)}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=f({type:r,selectors:[["app-summary"]],viewQuery:function(n,t){n&1&&z(t.answer,H,5),n&2&&M()},inputs:{content:[1,"content"],options:[1,"options"]},outputs:{content:"contentChange"},decls:7,vars:4,consts:[["answer",""],["for","content"],["id","content","name","content","rows","20",3,"ngModelChange","ngModel"],[3,"click","disabled"]],template:function(n,t){if(n&1){let o=w();s(0,"label",1),g(1,"Content:"),c(),s(2,"textarea",2),N("ngModelChange",function(l){return d(o),E(t.content,l)||(t.content=l),p(l)}),c(),s(3,"div")(4,"button",3),_("click",function(){return d(o),p(t.requestSummary())}),g(5),c()(),h(6,I,2,0,"div")}if(n&2){i(2),D("ngModel",t.content);let o=t.isSummarizing()?"Summarizing...":"Summarize",u=t.content().trim()===""||t.isSummarizing();i(2),v("disabled",u),i(),b(o),i(),y(t.error()?-1:6)}},dependencies:[j,L,Q,W],styles:["input[_ngcontent-%COMP%]{width:100%}"],changeDetection:0})};export{F as SummaryComponent};
